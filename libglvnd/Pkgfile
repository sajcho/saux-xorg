# Description:	The GL Vendor-Neutral Dispatch library
# URL:		https://github.com/NVIDIA/libglvnd
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	libxext

name=libglvnd
version=1.3.2
release=0
source=(https://github.com/NVIDIA/${name}/archive/v${version}/${name}-${version}.tar.gz \
	eglplatform.h)

build() {
	cd ${name}-${version}

	build-meson \
		-Dgles1=false \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -C build

	DESTDIR=$PKG meson install --no-rebuild -C build

	# replace EGL/eglplatform.h with the newer mesa version
	install -m 0644 $SRC/eglplatform.h $PKG/usr/include/EGL/
}
